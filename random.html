<html>
<head>
<title>Rondom Card Picking</title>
</head>
<body style="padding:.6em">
<h1 id=rn></h1><br>
<input id='myBtn' type="button" value="다음 세트">
<input id='set' type="button" style="background-color: white;">
<h3 id='rest'></h3>
<script>
    var rndoc = document.getElementById('rn');
    var emp = [];
    var rd = [];
    var rdch = ['J','Q','K','A']
    var joker = ['joker']
    for(i=0;i<9;i++){
        rd[i] = i+2;
    }
    var deck = rd.concat(rdch,['']);
    var deck1 = rd.concat(rdch,['']);
    var deckj = rd.concat(rdch,joker);
    var deckj1 = rd.concat(rdch,joker);
    var deck4 = emp.concat([deck],[deck1],[deckj],[deckj1])
    console.log(deck4);
    var j =0;var color = 0;
    function shape(rn1,rn2){
        console.log('rn1:',rn1);
        if(color == 1 && !(rn1 == 1 || rn1 ==2)){
            color = 0
            document.getElementById('rn').style.color = 'black';
        }
        else if((rn1 == 1 || rn1 ==2) && color ==0){
            // rn2 == 13 && rn1 == 3 && color == 0) || 
            color = 1
            document.getElementById('rn').style.color = 'red';
        } 
        return rn2 == 13 ? ''
         : rn1 == 0 ? '\u2660' //spade
         : rn1 == 1 ? '\u2666' // dia 25C6?
         : rn1 == 2 ? '\u2665' // heart
         :'\u2663'; // club
    }
    document.getElementById('rest').innerText = '\u2660 '+deck4[0]+'\n'+'\u2666 '+deck4[1]+'\n'+'\u2665 '+deck4[2]+'\n'+'\u2663 '+deck4[3]+'\n';

    function rnpick(){
        if(j<54){
            var rn1 = Math.floor(Math.random()*4);
            var rn2 = Math.floor(Math.random()*14);
            console.log('('+rn1+','+rn2+')');
            console.log('['+deck4[rn1][rn2]+']');
            console.log('count:',j);
            if(deck4[rn1][rn2] == ''){
                rnpick();
            } else{
                j++;
                console.log('done1:',rn1,',',rn2);
                console.log('done2:',deck4[rn1][rn2]);

                document.getElementById('rn').innerText = deck4[rn1][rn2] + shape(rn1,rn2);
                // console.log('why?1');
                deck4[rn1][rn2] = '';
                // console.log('why?2');
                document.getElementById('set').setAttribute('value',"현재 세트:"+j)
            }  
        }else{
            document.getElementById('rn').innerText = '운동 끝!';
            document.getElementById('rn').style.color = 'white';
            document.getElementById('rn').style.backgroundColor = 'black';
        }
        document.getElementById('rest').innerText = '\u2660 '+deck4[0]+'\n'+'\u2666 '+deck4[1]+'\n'+'\u2665 '+deck4[2]+'\n'+'\u2663 '+deck4[3]+'\n';
        document.getElementById('set').focus();
    }
    // Get the input field
    // var input = document.getElementById("myInput");
    var btn = document.getElementById('myBtn').addEventListener("click",rnpick)
    // Execute a function when the user releases a key on the keyboard
    window.addEventListener("keyup", function(event) {
    // Number 13 is the "Enter" key on the keyboard
        if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("myBtn").click();
        }
    });
</script>
</body>
</html>